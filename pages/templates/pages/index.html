{% extends 'base.html' %}
{% load humanize %}

{% block title %}
{% endblock title %}

{% block content %}
<h2>Cluster and services description</h2>

{{ settings.CLUSTER_INTRO | safe }}

{% if 'lustre_exporter' in settings.EXPORTER_INSTALLED %}
<h2>Filesystems performance</h2>

<h3>Bandwidth</h3>
<div class="container">
    <div class="row">
    {% for filesystem in fs %}
        <div class="col-sm">
            <h4>{{filesystem}}</h4>
            <div id="graph_{{filesystem}}_ost"></div>
        </div>
    {% endfor %}
    </div>
</div>

<h3>Metadata</h3>
<div class="container">
    <div class="row">
        {% for filesystem in fs %}
            <div class="col-sm">
                <h4>{{filesystem}}</h4>
                <div id="graph_{{filesystem}}_mdt"></div>
            </div>
        {% endfor %}
            </div>
</div>
<script>
    {% for filesystem in fs %}
    loadGraph('graph_{{filesystem}}_ost', 'graph/lustre/{{filesystem}}/ost.json');
    loadGraph('graph_{{filesystem}}_mdt', 'graph/lustre/{{filesystem}}/mdt.json');
    {% endfor %}
</script>
{% endif %}

{% endblock content %}
