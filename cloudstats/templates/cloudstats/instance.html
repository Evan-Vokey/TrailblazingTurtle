{% extends 'base.html' %}
{% load humanize %}
{% load i18n %}

{% block title %}
{% translate "Your instance use" %}
{% endblock title %}

{% block content %}
<h1>{% translate "Your instance use" %}</h1>

<ul class="nav nav-tabs" id="myTabs" role="tablist">
    <li class="nav-item">
      <a class="nav-link" data-toggle="tab" href="#last_month" role="tab">Last month</a>
    </li>
    <li class="nav-item">
      <a class="nav-link active" data-toggle="tab" href="#last_week" role="tab">Last week</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" data-toggle="tab" href="#last_day" role="tab">Last day</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" data-toggle="tab" href="#last_hour" role="tab">Last hour</a>
    </li>
  </ul>

<h3>{% translate "CPU cores" %}</h3>
<div id="graph_cpu"></div>

<h3>{% translate "Memory" %}</h3>
<div id="graph_memory"></div>

<h3>{% translate "Disk bandwidth" %}</h3>
<div id="graph_disk_bandwidth"></div>

<h3>{% translate "Disk IOPS" %}</h3>
<div id="graph_disk_iops"></div>

<h3>{% translate "Network bandwidth" %}</h3>
<div id="graph_network_bandwidth"></div>

<script>
function loadGraphs(delta){
    loadGraph('graph_cpu', 'graph/cpu.json?delta=' + delta);
    loadGraph('graph_memory', 'graph/memory.json?delta=' + delta);
    loadGraph('graph_disk_bandwidth', 'graph/disk_bandwidth.json?delta=' + delta);
    loadGraph('graph_disk_iops', 'graph/disk_iops.json?delta=' + delta);
    loadGraph('graph_network_bandwidth', 'graph/network_bandwidth.json?delta=' + delta);
  }
  $(document).ready(function(){
    loadGraphs('1w');

    $('#myTabs a').click(function (e) {
        if($(this).attr('href') == '#last_month'){
          loadGraphs('1m');
        }
        if($(this).attr('href') == '#last_week'){
            loadGraphs('1w');
        }
        if($(this).attr('href') == '#last_day'){
            loadGraphs('1d');
        }
        if($(this).attr('href') == '#last_hour'){
            loadGraphs('1h');
        }
    })
  });
</script>

{% endblock content %}
